import{t as e}from"./chunk-GTKDMUJJ-CiEWLnZ9.js";import{a as t,d as n,g as r,l as i,n as a,p as o,r as s,t as c,u as l}from"./chunk-2XYWPRAO-DsYDaQ-1.js";var u=class extends l{static{e(this,`TreemapTokenBuilder`)}static{a(this,`TreemapTokenBuilder`)}constructor(){super([`treemap`])}},d=/classDef\s+([A-Z_a-z]\w+)(?:\s+([^\n\r;]*))?;?/,f=class extends o{static{e(this,`TreemapValueConverter`)}static{a(this,`TreemapValueConverter`)}runCustomConverter(e,t,n){if(e.name===`NUMBER2`)return parseFloat(t.replace(/,/g,``));if(e.name===`SEPARATOR`||e.name===`STRING2`)return t.substring(1,t.length-1);if(e.name===`INDENTATION`)return t.length;if(e.name===`ClassDef`){if(typeof t!=`string`)return t;let e=d.exec(t);if(e)return{$type:`ClassDefStatement`,className:e[1],styleText:e[2]||void 0}}}};function p(e){let t=e.validation.TreemapValidator,n=e.validation.ValidationRegistry;if(n){let e={Treemap:t.checkSingleRoot.bind(t)};n.register(e,t)}}e(p,`registerValidationChecks`),a(p,`registerValidationChecks`);var m=class{static{e(this,`TreemapValidator`)}static{a(this,`TreemapValidator`)}checkSingleRoot(e,t){let n;for(let r of e.TreemapRows)r.item&&(n===void 0&&r.indent===void 0?n=0:(r.indent===void 0||n!==void 0&&n>=parseInt(r.indent,10))&&t(`error`,`Multiple root nodes are not allowed in a treemap.`,{node:r,property:`item`}))}},h={parser:{TokenBuilder:a(()=>new u,`TokenBuilder`),ValueConverter:a(()=>new f,`ValueConverter`)},validation:{TreemapValidator:a(()=>new m,`TreemapValidator`)}};function g(e=t){let a=r(c(e),s),o=r(n({shared:a}),i,h);return a.ServiceRegistry.register(o),p(o),{shared:a,Treemap:o}}e(g,`createTreemapServices`),a(g,`createTreemapServices`);export{h as n,g as t};